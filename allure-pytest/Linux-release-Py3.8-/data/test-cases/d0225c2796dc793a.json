{"uid":"d0225c2796dc793a","name":"test_legacy_noarch_python","fullName":"tests.test_api_build#test_legacy_noarch_python","historyId":"feb96acc35227ee5eec272cc2f5d058b","time":{"start":1668028267663,"stop":1668028284114,"duration":16451},"status":"skipped","statusMessage":"XFAIL parallel verify/execute in conda 4.7 breaks legacy noarch, which depends on having the env files present before pre-link scripts are run.\n\nAttributeError: 'dict' object has no attribute 'subdir'","statusTrace":"Traceback (most recent call last):\n  File \"/usr/share/miniconda/envs/test/lib/python3.8/site-packages/conda_verify/checks.py\", line 87, in __init__\n    with open(os.path.join(self.tmpdir, 'info', 'paths.json')) as f:\nFileNotFoundError: [Errno 2] No such file or directory: '/tmp/tmp9mna6d21/info/paths.json'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/runner/work/conda-build/conda-build/tests/test_api_build.py\", line 823, in test_legacy_noarch_python\n    output = api.build(os.path.join(metadata_dir, \"_legacy_noarch_python\"),\n  File \"/home/runner/work/conda-build/conda-build/conda_build/api.py\", line 180, in build\n    return build_tree(\n  File \"/home/runner/work/conda-build/conda-build/conda_build/build.py\", line 3099, in build_tree\n    packages_from_this = build(metadata, stats,\n  File \"/home/runner/work/conda-build/conda-build/conda_build/build.py\", line 2374, in build\n    newly_built_packages = bundlers[pkg_type](output_d, m, env, stats)\n  File \"/home/runner/work/conda-build/conda-build/conda_build/build.py\", line 1716, in bundle_conda\n    verifier.verify_package(path_to_package=tmp_path, checks_to_ignore=checks_to_ignore,\n  File \"/usr/share/miniconda/envs/test/lib/python3.8/site-packages/conda_verify/verify.py\", line 20, in verify_package\n    package_check = CondaPackageCheck(path_to_package)\n  File \"/usr/share/miniconda/envs/test/lib/python3.8/site-packages/conda_verify/checks.py\", line 92, in __init__\n    assert self.info.subdir == 'noarch'\nAttributeError: 'dict' object has no attribute 'subdir'","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"tmp_path_factory","time":{"start":1668028097802,"stop":1668028097803,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"tmp_path","time":{"start":1668028267661,"stop":1668028267661,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"testing_workdir","time":{"start":1668028267661,"stop":1668028267662,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"tmpdir","time":{"start":1668028267661,"stop":1668028267661,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"testing_config","time":{"start":1668028267662,"stop":1668028267662,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"testStage":{"status":"skipped","statusMessage":"XFAIL parallel verify/execute in conda 4.7 breaks legacy noarch, which depends on having the env files present before pre-link scripts are run.\n\nAttributeError: 'dict' object has no attribute 'subdir'","statusTrace":"Traceback (most recent call last):\n  File \"/usr/share/miniconda/envs/test/lib/python3.8/site-packages/conda_verify/checks.py\", line 87, in __init__\n    with open(os.path.join(self.tmpdir, 'info', 'paths.json')) as f:\nFileNotFoundError: [Errno 2] No such file or directory: '/tmp/tmp9mna6d21/info/paths.json'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/runner/work/conda-build/conda-build/tests/test_api_build.py\", line 823, in test_legacy_noarch_python\n    output = api.build(os.path.join(metadata_dir, \"_legacy_noarch_python\"),\n  File \"/home/runner/work/conda-build/conda-build/conda_build/api.py\", line 180, in build\n    return build_tree(\n  File \"/home/runner/work/conda-build/conda-build/conda_build/build.py\", line 3099, in build_tree\n    packages_from_this = build(metadata, stats,\n  File \"/home/runner/work/conda-build/conda-build/conda_build/build.py\", line 2374, in build\n    newly_built_packages = bundlers[pkg_type](output_d, m, env, stats)\n  File \"/home/runner/work/conda-build/conda-build/conda_build/build.py\", line 1716, in bundle_conda\n    verifier.verify_package(path_to_package=tmp_path, checks_to_ignore=checks_to_ignore,\n  File \"/usr/share/miniconda/envs/test/lib/python3.8/site-packages/conda_verify/verify.py\", line 20, in verify_package\n    package_check = CondaPackageCheck(path_to_package)\n  File \"/usr/share/miniconda/envs/test/lib/python3.8/site-packages/conda_verify/checks.py\", line 92, in __init__\n    assert self.info.subdir == 'noarch'\nAttributeError: 'dict' object has no attribute 'subdir'","steps":[],"attachments":[{"uid":"79155273318bc187","name":"log","source":"79155273318bc187.txt","type":"text/plain","size":190},{"uid":"f1cc58140aa62804","name":"stdout","source":"f1cc58140aa62804.txt","type":"text/plain","size":4006},{"uid":"dac58caaaeb802dc","name":"stderr","source":"dac58caaaeb802dc.txt","type":"text/plain","size":448}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":true,"hasContent":true},"afterStages":[{"name":"testing_workdir::return_to_saved_path","time":{"start":1668028284123,"stop":1668028284123,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"labels":[{"name":"tag","value":"@pytest.mark.xfail(True, reason='parallel verify/execute in conda 4.7 breaks legacy noarch, which depends on having the env files present before pre-link scripts are run.')"},{"name":"tag","value":"sanity"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_api_build"},{"name":"host","value":"fv-az275-214"},{"name":"thread","value":"3538-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_api_build"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":0,"broken":0,"skipped":2,"passed":0,"unknown":0,"total":2},"items":[{"uid":"418d9c4546b3ab1d","status":"skipped","statusDetails":"XFAIL parallel verify/execute in conda 4.7 breaks legacy noarch, which depends on having the env files present before pre-link scripts are run.\n\nAttributeError: 'dict' object has no attribute 'subdir'","time":{"start":1668028267663,"stop":1668028284114,"duration":16451}}]},"tags":["@pytest.mark.xfail(True, reason='parallel verify/execute in conda 4.7 breaks legacy noarch, which depends on having the env files present before pre-link scripts are run.')","sanity"]},"source":"d0225c2796dc793a.json","parameterValues":[]}