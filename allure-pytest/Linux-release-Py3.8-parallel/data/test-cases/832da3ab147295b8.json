{"uid":"832da3ab147295b8","name":"test_legacy_noarch_python","fullName":"tests.test_api_build#test_legacy_noarch_python","historyId":"feb96acc35227ee5eec272cc2f5d058b","time":{"start":1669034469084,"stop":1669034484244,"duration":15160},"status":"skipped","statusMessage":"XFAIL parallel verify/execute in conda 4.7 breaks legacy noarch, which depends on having the env files present before pre-link scripts are run.\n\nAttributeError: 'dict' object has no attribute 'subdir'","statusTrace":"Traceback (most recent call last):\n  File \"/usr/share/miniconda/envs/test/lib/python3.8/site-packages/conda_verify/checks.py\", line 87, in __init__\n    with open(os.path.join(self.tmpdir, 'info', 'paths.json')) as f:\nFileNotFoundError: [Errno 2] No such file or directory: '/tmp/tmpbcob3k0s/info/paths.json'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/runner/work/conda-build/conda-build/tests/test_api_build.py\", line 823, in test_legacy_noarch_python\n    output = api.build(os.path.join(metadata_dir, \"_legacy_noarch_python\"),\n  File \"/home/runner/work/conda-build/conda-build/conda_build/api.py\", line 180, in build\n    return build_tree(\n  File \"/home/runner/work/conda-build/conda-build/conda_build/build.py\", line 3094, in build_tree\n    packages_from_this = build(metadata, stats,\n  File \"/home/runner/work/conda-build/conda-build/conda_build/build.py\", line 2369, in build\n    newly_built_packages = bundlers[pkg_type](output_d, m, env, stats)\n  File \"/home/runner/work/conda-build/conda-build/conda_build/build.py\", line 1711, in bundle_conda\n    verifier.verify_package(path_to_package=tmp_path, checks_to_ignore=checks_to_ignore,\n  File \"/usr/share/miniconda/envs/test/lib/python3.8/site-packages/conda_verify/verify.py\", line 20, in verify_package\n    package_check = CondaPackageCheck(path_to_package)\n  File \"/usr/share/miniconda/envs/test/lib/python3.8/site-packages/conda_verify/checks.py\", line 92, in __init__\n    assert self.info.subdir == 'noarch'\nAttributeError: 'dict' object has no attribute 'subdir'","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"tmp_path_factory","time":{"start":1669034311496,"stop":1669034311497,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"tmp_path","time":{"start":1669034469081,"stop":1669034469082,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"testing_config","time":{"start":1669034469082,"stop":1669034469083,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"testing_workdir","time":{"start":1669034469082,"stop":1669034469082,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"tmpdir","time":{"start":1669034469082,"stop":1669034469082,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"testStage":{"status":"skipped","statusMessage":"XFAIL parallel verify/execute in conda 4.7 breaks legacy noarch, which depends on having the env files present before pre-link scripts are run.\n\nAttributeError: 'dict' object has no attribute 'subdir'","statusTrace":"Traceback (most recent call last):\n  File \"/usr/share/miniconda/envs/test/lib/python3.8/site-packages/conda_verify/checks.py\", line 87, in __init__\n    with open(os.path.join(self.tmpdir, 'info', 'paths.json')) as f:\nFileNotFoundError: [Errno 2] No such file or directory: '/tmp/tmpbcob3k0s/info/paths.json'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/runner/work/conda-build/conda-build/tests/test_api_build.py\", line 823, in test_legacy_noarch_python\n    output = api.build(os.path.join(metadata_dir, \"_legacy_noarch_python\"),\n  File \"/home/runner/work/conda-build/conda-build/conda_build/api.py\", line 180, in build\n    return build_tree(\n  File \"/home/runner/work/conda-build/conda-build/conda_build/build.py\", line 3094, in build_tree\n    packages_from_this = build(metadata, stats,\n  File \"/home/runner/work/conda-build/conda-build/conda_build/build.py\", line 2369, in build\n    newly_built_packages = bundlers[pkg_type](output_d, m, env, stats)\n  File \"/home/runner/work/conda-build/conda-build/conda_build/build.py\", line 1711, in bundle_conda\n    verifier.verify_package(path_to_package=tmp_path, checks_to_ignore=checks_to_ignore,\n  File \"/usr/share/miniconda/envs/test/lib/python3.8/site-packages/conda_verify/verify.py\", line 20, in verify_package\n    package_check = CondaPackageCheck(path_to_package)\n  File \"/usr/share/miniconda/envs/test/lib/python3.8/site-packages/conda_verify/checks.py\", line 92, in __init__\n    assert self.info.subdir == 'noarch'\nAttributeError: 'dict' object has no attribute 'subdir'","steps":[],"attachments":[{"uid":"a33c599c1c181d3c","name":"log","source":"a33c599c1c181d3c.txt","type":"text/plain","size":501},{"uid":"1d0810657c4bc4a","name":"stdout","source":"1d0810657c4bc4a.txt","type":"text/plain","size":4006},{"uid":"98677ed9c0484443","name":"stderr","source":"98677ed9c0484443.txt","type":"text/plain","size":709}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":true,"hasContent":true},"afterStages":[{"name":"testing_workdir::return_to_saved_path","time":{"start":1669034484252,"stop":1669034484252,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"labels":[{"name":"tag","value":"@pytest.mark.xfail(True, reason='parallel verify/execute in conda 4.7 breaks legacy noarch, which depends on having the env files present before pre-link scripts are run.')"},{"name":"tag","value":"sanity"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_api_build"},{"name":"host","value":"fv-az343-870"},{"name":"thread","value":"3546-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_api_build"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":0,"broken":0,"skipped":2,"passed":0,"unknown":0,"total":2},"items":[{"uid":"f50e8661b5f8d1a9","status":"skipped","statusDetails":"XFAIL parallel verify/execute in conda 4.7 breaks legacy noarch, which depends on having the env files present before pre-link scripts are run.\n\nAttributeError: 'dict' object has no attribute 'subdir'","time":{"start":1668034213940,"stop":1668034229600,"duration":15660}}]},"tags":["@pytest.mark.xfail(True, reason='parallel verify/execute in conda 4.7 breaks legacy noarch, which depends on having the env files present before pre-link scripts are run.')","sanity"]},"source":"832da3ab147295b8.json","parameterValues":[]}