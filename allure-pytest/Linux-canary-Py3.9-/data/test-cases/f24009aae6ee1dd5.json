{"uid":"f24009aae6ee1dd5","name":"test_legacy_noarch_python","fullName":"tests.test_api_build#test_legacy_noarch_python","historyId":"feb96acc35227ee5eec272cc2f5d058b","time":{"start":1668028269980,"stop":1668028286478,"duration":16498},"status":"skipped","statusMessage":"XFAIL parallel verify/execute in conda 4.7 breaks legacy noarch, which depends on having the env files present before pre-link scripts are run.\n\nAttributeError: 'dict' object has no attribute 'subdir'","statusTrace":"Traceback (most recent call last):\n  File \"/usr/share/miniconda/envs/test/lib/python3.9/site-packages/conda_verify/checks.py\", line 87, in __init__\n    with open(os.path.join(self.tmpdir, 'info', 'paths.json')) as f:\nFileNotFoundError: [Errno 2] No such file or directory: '/tmp/tmpyphrk966/info/paths.json'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/runner/work/conda-build/conda-build/tests/test_api_build.py\", line 823, in test_legacy_noarch_python\n    output = api.build(os.path.join(metadata_dir, \"_legacy_noarch_python\"),\n  File \"/home/runner/work/conda-build/conda-build/conda_build/api.py\", line 180, in build\n    return build_tree(\n  File \"/home/runner/work/conda-build/conda-build/conda_build/build.py\", line 3099, in build_tree\n    packages_from_this = build(metadata, stats,\n  File \"/home/runner/work/conda-build/conda-build/conda_build/build.py\", line 2374, in build\n    newly_built_packages = bundlers[pkg_type](output_d, m, env, stats)\n  File \"/home/runner/work/conda-build/conda-build/conda_build/build.py\", line 1716, in bundle_conda\n    verifier.verify_package(path_to_package=tmp_path, checks_to_ignore=checks_to_ignore,\n  File \"/usr/share/miniconda/envs/test/lib/python3.9/site-packages/conda_verify/verify.py\", line 20, in verify_package\n    package_check = CondaPackageCheck(path_to_package)\n  File \"/usr/share/miniconda/envs/test/lib/python3.9/site-packages/conda_verify/checks.py\", line 92, in __init__\n    assert self.info.subdir == 'noarch'\nAttributeError: 'dict' object has no attribute 'subdir'","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"tmp_path_factory","time":{"start":1668028103912,"stop":1668028103913,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"tmpdir","time":{"start":1668028269978,"stop":1668028269979,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"tmp_path","time":{"start":1668028269978,"stop":1668028269978,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"testing_config","time":{"start":1668028269979,"stop":1668028269979,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"testing_workdir","time":{"start":1668028269979,"stop":1668028269979,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"testStage":{"status":"skipped","statusMessage":"XFAIL parallel verify/execute in conda 4.7 breaks legacy noarch, which depends on having the env files present before pre-link scripts are run.\n\nAttributeError: 'dict' object has no attribute 'subdir'","statusTrace":"Traceback (most recent call last):\n  File \"/usr/share/miniconda/envs/test/lib/python3.9/site-packages/conda_verify/checks.py\", line 87, in __init__\n    with open(os.path.join(self.tmpdir, 'info', 'paths.json')) as f:\nFileNotFoundError: [Errno 2] No such file or directory: '/tmp/tmpyphrk966/info/paths.json'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/runner/work/conda-build/conda-build/tests/test_api_build.py\", line 823, in test_legacy_noarch_python\n    output = api.build(os.path.join(metadata_dir, \"_legacy_noarch_python\"),\n  File \"/home/runner/work/conda-build/conda-build/conda_build/api.py\", line 180, in build\n    return build_tree(\n  File \"/home/runner/work/conda-build/conda-build/conda_build/build.py\", line 3099, in build_tree\n    packages_from_this = build(metadata, stats,\n  File \"/home/runner/work/conda-build/conda-build/conda_build/build.py\", line 2374, in build\n    newly_built_packages = bundlers[pkg_type](output_d, m, env, stats)\n  File \"/home/runner/work/conda-build/conda-build/conda_build/build.py\", line 1716, in bundle_conda\n    verifier.verify_package(path_to_package=tmp_path, checks_to_ignore=checks_to_ignore,\n  File \"/usr/share/miniconda/envs/test/lib/python3.9/site-packages/conda_verify/verify.py\", line 20, in verify_package\n    package_check = CondaPackageCheck(path_to_package)\n  File \"/usr/share/miniconda/envs/test/lib/python3.9/site-packages/conda_verify/checks.py\", line 92, in __init__\n    assert self.info.subdir == 'noarch'\nAttributeError: 'dict' object has no attribute 'subdir'","steps":[],"attachments":[{"uid":"cd13a81159a04c6a","name":"log","source":"cd13a81159a04c6a.txt","type":"text/plain","size":190},{"uid":"2867f4051ad703c5","name":"stdout","source":"2867f4051ad703c5.txt","type":"text/plain","size":4053},{"uid":"c4763bcf8f96c2ae","name":"stderr","source":"c4763bcf8f96c2ae.txt","type":"text/plain","size":448}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":true,"hasContent":true},"afterStages":[{"name":"testing_workdir::return_to_saved_path","time":{"start":1668028286486,"stop":1668028286486,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"labels":[{"name":"tag","value":"@pytest.mark.xfail(True, reason='parallel verify/execute in conda 4.7 breaks legacy noarch, which depends on having the env files present before pre-link scripts are run.')"},{"name":"tag","value":"sanity"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_api_build"},{"name":"host","value":"fv-az133-182"},{"name":"thread","value":"3593-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_api_build"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"tags":["@pytest.mark.xfail(True, reason='parallel verify/execute in conda 4.7 breaks legacy noarch, which depends on having the env files present before pre-link scripts are run.')","sanity"]},"source":"f24009aae6ee1dd5.json","parameterValues":[]}