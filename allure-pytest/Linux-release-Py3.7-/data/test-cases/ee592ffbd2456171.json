{"uid":"ee592ffbd2456171","name":"test_legacy_noarch_python","fullName":"tests.test_api_build#test_legacy_noarch_python","historyId":"feb96acc35227ee5eec272cc2f5d058b","time":{"start":1668028261467,"stop":1668028281141,"duration":19674},"status":"skipped","statusMessage":"XFAIL parallel verify/execute in conda 4.7 breaks legacy noarch, which depends on having the env files present before pre-link scripts are run.\n\nAttributeError: 'dict' object has no attribute 'subdir'","statusTrace":"Traceback (most recent call last):\n  File \"/usr/share/miniconda/envs/test/lib/python3.7/site-packages/conda_verify/checks.py\", line 87, in __init__\n    with open(os.path.join(self.tmpdir, 'info', 'paths.json')) as f:\nFileNotFoundError: [Errno 2] No such file or directory: '/tmp/tmp502wpnlp/info/paths.json'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/runner/work/conda-build/conda-build/tests/test_api_build.py\", line 824, in test_legacy_noarch_python\n    config=testing_config)[0]\n  File \"/home/runner/work/conda-build/conda-build/conda_build/api.py\", line 189, in build\n    variants=variants\n  File \"/home/runner/work/conda-build/conda-build/conda_build/build.py\", line 3104, in build_tree\n    notest=notest,\n  File \"/home/runner/work/conda-build/conda-build/conda_build/build.py\", line 2374, in build\n    newly_built_packages = bundlers[pkg_type](output_d, m, env, stats)\n  File \"/home/runner/work/conda-build/conda-build/conda_build/build.py\", line 1717, in bundle_conda\n    exit_on_error=metadata.config.exit_on_verify_error)\n  File \"/usr/share/miniconda/envs/test/lib/python3.7/site-packages/conda_verify/verify.py\", line 20, in verify_package\n    package_check = CondaPackageCheck(path_to_package)\n  File \"/usr/share/miniconda/envs/test/lib/python3.7/site-packages/conda_verify/checks.py\", line 92, in __init__\n    assert self.info.subdir == 'noarch'\nAttributeError: 'dict' object has no attribute 'subdir'","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"tmp_path_factory","time":{"start":1668028090143,"stop":1668028090144,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"testing_workdir","time":{"start":1668028261465,"stop":1668028261466,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"tmpdir","time":{"start":1668028261465,"stop":1668028261465,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"tmp_path","time":{"start":1668028261465,"stop":1668028261465,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"testing_config","time":{"start":1668028261466,"stop":1668028261466,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"testStage":{"status":"skipped","statusMessage":"XFAIL parallel verify/execute in conda 4.7 breaks legacy noarch, which depends on having the env files present before pre-link scripts are run.\n\nAttributeError: 'dict' object has no attribute 'subdir'","statusTrace":"Traceback (most recent call last):\n  File \"/usr/share/miniconda/envs/test/lib/python3.7/site-packages/conda_verify/checks.py\", line 87, in __init__\n    with open(os.path.join(self.tmpdir, 'info', 'paths.json')) as f:\nFileNotFoundError: [Errno 2] No such file or directory: '/tmp/tmp502wpnlp/info/paths.json'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/runner/work/conda-build/conda-build/tests/test_api_build.py\", line 824, in test_legacy_noarch_python\n    config=testing_config)[0]\n  File \"/home/runner/work/conda-build/conda-build/conda_build/api.py\", line 189, in build\n    variants=variants\n  File \"/home/runner/work/conda-build/conda-build/conda_build/build.py\", line 3104, in build_tree\n    notest=notest,\n  File \"/home/runner/work/conda-build/conda-build/conda_build/build.py\", line 2374, in build\n    newly_built_packages = bundlers[pkg_type](output_d, m, env, stats)\n  File \"/home/runner/work/conda-build/conda-build/conda_build/build.py\", line 1717, in bundle_conda\n    exit_on_error=metadata.config.exit_on_verify_error)\n  File \"/usr/share/miniconda/envs/test/lib/python3.7/site-packages/conda_verify/verify.py\", line 20, in verify_package\n    package_check = CondaPackageCheck(path_to_package)\n  File \"/usr/share/miniconda/envs/test/lib/python3.7/site-packages/conda_verify/checks.py\", line 92, in __init__\n    assert self.info.subdir == 'noarch'\nAttributeError: 'dict' object has no attribute 'subdir'","steps":[],"attachments":[{"uid":"8f857519c5db1ae8","name":"log","source":"8f857519c5db1ae8.txt","type":"text/plain","size":190},{"uid":"ef01e2ca8e0a37e0","name":"stdout","source":"ef01e2ca8e0a37e0.txt","type":"text/plain","size":4006},{"uid":"1acab4a492b91211","name":"stderr","source":"1acab4a492b91211.txt","type":"text/plain","size":474}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":true,"hasContent":true},"afterStages":[{"name":"testing_workdir::return_to_saved_path","time":{"start":1668028281147,"stop":1668028281148,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"labels":[{"name":"tag","value":"@pytest.mark.xfail(True, reason='parallel verify/execute in conda 4.7 breaks legacy noarch, which depends on having the env files present before pre-link scripts are run.')"},{"name":"tag","value":"sanity"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_api_build"},{"name":"host","value":"fv-az105-324"},{"name":"thread","value":"3534-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_api_build"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"tags":["@pytest.mark.xfail(True, reason='parallel verify/execute in conda 4.7 breaks legacy noarch, which depends on having the env files present before pre-link scripts are run.')","sanity"]},"source":"ee592ffbd2456171.json","parameterValues":[]}